{"version":3,"file":"js/11.544ef3b0.js","mappings":"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","sources":["webpack://aus-tour/./src/func/showToastMsg.js","webpack://aus-tour/./src/views/client/PayView.vue","webpack://aus-tour/./src/views/client/PayView.vue?2b85"],"sourcesContent":["import emitter from '@/libs/emitter';\r\n\r\nexport default (success, content) => {\r\n  emitter.emit('push-message', {\r\n    style: success === true ? 'success' : 'danger',\r\n    title: success === true ? '成功' : '失敗',\r\n    content,\r\n  });\r\n};\r\n","<template>\r\n  <Loading :active=\"isLoading\" />\r\n  <div class=\"container\">\r\n    <div class=\"row flex-row-reverse\">\r\n      <div class=\"col-md-6 p-2\">\r\n        <div class=\"bg-light\">\r\n          <h4 class=\"text-center fw-bolder p-4 m-0\">購買景點明細</h4>\r\n        </div>\r\n        <div class=\"table-responsive bg-light px-4\">\r\n          <table class=\"table text-center align-middle m-0\">\r\n            <tbody>\r\n              <tr v-for=\"item in order.products\" :key=\"item.id\">\r\n                <td>\r\n                  <div\r\n                    class=\"m-auto\"\r\n                    :style=\"`\r\n                      width: 6rem;\r\n                      height: 5rem;\r\n                      background-size: cover;\r\n                      background-position: center center;\r\n                      background-image: url(${item.product.imageUrl});\r\n                    `\"\r\n                  ></div>\r\n                </td>\r\n                <td class=\"text-nowrap\">{{ item.product.title }}</td>\r\n                <td>{{`x ${item.qty}`}}</td>\r\n                <td class=\"text-nowrap\">NT$ {{ currency(item.total) }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div class=\"text-end bg-light p-4\">\r\n          <div class=\"h5 fw-bold p-2 mb-0\">總金額 : NT$ {{ currency(order.total) }}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-md-6 p-2\">\r\n        <div class=\"bg-light\">\r\n          <h4 class=\"text-center fw-bolder p-4 m-0\">訂單資訊</h4>\r\n          <ul class=\"list-group px-4\">\r\n            <li class=\"list-group-item border-0 d-flex justify-content-between align-items-center\">\r\n              <span>訂購時間 : </span><span>{{ timeConvert(order.create_at) }}</span>\r\n            </li>\r\n            <li class=\"list-group-item border-0 d-flex justify-content-between align-items-center\">\r\n              <span>訂單編號 : </span><span>{{ order.id }}</span>\r\n            </li>\r\n            <li class=\"list-group-item border-0 d-flex justify-content-between align-items-center\">\r\n              <span>付款狀態 : </span>\r\n              <span :class=\"{ 'text-danger' : !order.is_paid }\">\r\n                {{ order.is_paid ? '已付款' : '尚未付款' }}\r\n              </span>\r\n            </li>\r\n          </ul>\r\n          <h4 class=\"text-center fw-bolder p-4 m-0\">購買人資料</h4>\r\n          <ul class=\"list-group px-4 pb-4\">\r\n            <li class=\"list-group-item border-0 d-flex justify-content-between align-items-center\">\r\n              <span>姓名 : </span><span>{{ user.name }}</span>\r\n            </li>\r\n            <li class=\"list-group-item border-0 d-flex justify-content-between align-items-center\">\r\n              <span>地址 : </span><span>{{ user.address }}</span>\r\n            </li>\r\n            <li class=\"list-group-item border-0 d-flex justify-content-between align-items-center\">\r\n              <span>電話 : </span><span>{{ user.tel }}</span>\r\n            </li>\r\n            <li class=\"list-group-item border-0 d-flex justify-content-between align-items-center\">\r\n              <span>Email : </span><span>{{ user.email }}</span>\r\n            </li>\r\n            <li class=\"list-group-item border-0\">\r\n              <span>留言 : </span>\r\n              <p class=\"text-break mb-0\">{{ order.message }}</p>\r\n            </li>\r\n          </ul>\r\n          <div class=\"text-center px-4 pb-4\">\r\n            <button type=\"button\" class=\"btn btn-primary\" style=\"width: 100%;\" @click=\"payOrder\">\r\n              馬上付款\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport showToastMsg from '@/func/showToastMsg';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      isLoading: false,\r\n      order: {},\r\n      user: {},\r\n    };\r\n  },\r\n  inject: ['timeConvert', 'currency'],\r\n  methods: {\r\n    getOrder() {\r\n      this.isLoading = true;\r\n      const { id } = this.$route.params;\r\n      this.$http.get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order/${id}`)\r\n        .then((res) => {\r\n          this.isLoading = false;\r\n          const { order } = res.data;\r\n          if (order.is_paid === true) {\r\n            this.$router.push(`/checkout/payed/${order.id}`);\r\n          } else {\r\n            this.order = order;\r\n            this.user = order.user;\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          const { message, success } = err.response.data;\r\n          showToastMsg(success, message);\r\n        });\r\n    },\r\n    payOrder() {\r\n      this.isLoading = true;\r\n      this.$http.post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/pay/${this.order.id}`)\r\n        .then((res) => {\r\n          this.isLoading = false;\r\n          const { message, success } = res.data;\r\n          showToastMsg(success, message);\r\n          this.$router.push(`/checkout/payed/${this.order.id}`);\r\n        })\r\n        .catch((err) => {\r\n          const { message, success } = err.response.data;\r\n          showToastMsg(success, message);\r\n        });\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getOrder();\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./PayView.vue?vue&type=template&id=5ccecb7b\"\nimport script from \"./PayView.vue?vue&type=script&lang=js\"\nexport * from \"./PayView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"E:\\\\final-project\\\\aus-tour\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["success","content","emitter","style","title","class","_createElementVNode","_createVNode","_component_Loading","active","$data","_hoisted_4","_createElementBlock","_Fragment","_renderList","products","item","key","id","product","imageUrl","_toDisplayString","qty","$options","total","_hoisted_13","_hoisted_16","create_at","_hoisted_18","_hoisted_20","is_paid","_hoisted_21","_hoisted_24","name","_hoisted_26","address","_hoisted_28","tel","_hoisted_30","email","_hoisted_32","message","type","onClick","data","isLoading","order","user","inject","methods","getOrder","this","$route","params","$http","get","then","res","$router","push","catch","err","response","showToastMsg","payOrder","post","mounted","__exports__","render"],"sourceRoot":""}
"use strict";(self["webpackChunkaus_tour"]=self["webpackChunkaus_tour"]||[]).push([[493],{3329:function(e,t,a){var l=a(1530);t["Z"]=(e,t)=>{l.Z.emit("push-message",{style:!0===e?"success":"danger",title:!0===e?"成功":"失敗",content:t})}},6493:function(e,t,a){a.r(t),a.d(t,{default:function(){return ee}});var l=a(6252),s=a(3577),o=a(9963);const n={class:"container"},r={class:"row flex-row-reverse"},i={class:"col-md-6 p-2"},c={class:"table-responsive bg-light px-4 pt-4"},d=(0,l._)("h4",{class:"text-center fw-bolder mb-4"},"訂單內容",-1),u={class:"table text-center align-middle m-0"},p=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{class:"py-2 px-0",scope:"col"},"圖片"),(0,l._)("th",{class:"py-2 px-0",scope:"col"},"名稱"),(0,l._)("th",{class:"py-2 px-0",scope:"col"},"數量"),(0,l._)("th",{class:"py-2 px-0",scope:"col"},"小計")])],-1),m={class:"text-nowrap fw-bolder"},h={class:"text-nowrap"},g={class:"bg-light text-end px-4 pb-4"},v={class:"border-bottom"},f={class:"p-2"},_={key:0,class:"p-2"},b={class:"fs-5 fw-bold p-2 mb-0"},y={for:"coupon"},w=["placeholder","disabled"],C=["disabled"],k=(0,l._)("span",{style:{margin:"0 30px"}},[(0,l.Uk)(' 現在只要輸入折扣碼"'),(0,l._)("span",{class:"fs-4 fw-bolder text-danger"},"SuperPrice80"),(0,l.Uk)('"，即可享有折扣喔 ! ')],-1),x=(0,l._)("span",{style:{margin:"0 30px"}},[(0,l.Uk)(' 現在只要輸入折扣碼"'),(0,l._)("span",{class:"fs-4 fw-bolder text-danger"},"SuperPrice80"),(0,l.Uk)('"，即可享有折扣喔 ! ')],-1),$={class:"col-md-6 p-2"},W={class:"bg-light p-4"},q=(0,l._)("h4",{class:"text-center fw-bolder mb-4"},"填寫訂單資料",-1),U={class:"mb-4"},V=(0,l._)("label",{for:"email",class:"form-label"},[(0,l.Uk)(" E-mail"),(0,l._)("span",{class:"text-danger px-2"},"*")],-1),H={class:"mb-4"},T=(0,l._)("label",{for:"name",class:"form-label"},[(0,l.Uk)(" 收件人姓名"),(0,l._)("span",{class:"text-danger px-2"},"*")],-1),D={class:"mb-4"},O=(0,l._)("label",{for:"tel",class:"form-label"},[(0,l.Uk)(" 收件人電話"),(0,l._)("span",{class:"text-danger px-2"},"*")],-1),L={class:"mb-4"},F=(0,l._)("label",{for:"address",class:"form-label"},[(0,l.Uk)(" 收件人地址"),(0,l._)("span",{class:"text-danger px-2"},"*")],-1),S={class:"mb-4"},Z=(0,l._)("label",{for:"message",class:"form-label"}," 留言 ",-1),z=(0,l._)("div",{class:"text-end"},[(0,l._)("button",{type:"submit",class:"btn btn-primary"}," 送出訂單 ")],-1);function N(e,t,a,N,P,j){const I=(0,l.up)("Loading"),M=(0,l.up)("Vue3Marquee"),Y=(0,l.up)("Field"),B=(0,l.up)("ErrorMessage"),K=(0,l.up)("Form");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(I,{active:P.isLoading},null,8,["active"]),(0,l._)("div",n,[(0,l._)("div",r,[(0,l._)("div",i,[(0,l._)("div",c,[d,(0,l._)("table",u,[p,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(P.carts,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",null,[(0,l._)("div",{class:"m-auto",style:(0,s.j5)(`\n                      width: 6rem;\n                      height: 5rem;\n                      background-size: cover;\n                      background-position: center center;\n                      background-image: url(${e.product.imageUrl});\n                    `)},null,4)]),(0,l._)("td",m,(0,s.zw)(e.product.title),1),(0,l._)("td",null,(0,s.zw)(e.qty),1),(0,l._)("td",h,"NT$ "+(0,s.zw)(j.currency(e.total)),1)])))),128))])])]),(0,l._)("div",g,[(0,l._)("div",v,[(0,l._)("div",f,"總計 : NT$ "+(0,s.zw)(j.currency(P.total)),1),P.total!==P.finalTotal?((0,l.wg)(),(0,l.iD)("div",_," 折扣 : NT$ "+(0,s.zw)(j.currency(this.total-this.finalTotal)),1)):(0,l.kq)("",!0)]),(0,l._)("div",b,"總金額 : NT$ "+(0,s.zw)(j.currency(P.finalTotal)),1),(0,l._)("div",{class:"input-group d-flex justify-content-end align-items-center",style:(0,s.j5)({cursor:0===P.couponCode.length||""===P.couponCode?"not-allowed":"pointer"})},[(0,l._)("label",y,[(0,l.wy)((0,l._)("input",{type:"text",name:"coupon",placeholder:P.total-P.finalTotal!==0?"已成功套用折扣碼!!":"輸入折扣碼",disabled:P.total-P.finalTotal!==0,id:"coupon",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>P.couponCode=e)},null,8,w),[[o.nr,P.couponCode]])]),(0,l._)("button",{type:"button",class:"btn btn-primary px-2",disabled:0===P.couponCode.length||""===P.couponCode,onClick:t[1]||(t[1]=(...e)=>j.getDiscount&&j.getDiscount(...e))}," 套用 ",8,C)],4)]),(0,l.Wm)(M,{class:"fs-5 my-3",pauseOnHover:!0,pauseOnClick:!0},{default:(0,l.w5)((()=>[k,x])),_:1})]),(0,l._)("div",$,[(0,l._)("div",W,[q,(0,l.Wm)(K,{ref:"form",onSubmit:j.createOrder},{default:(0,l.w5)((({errors:e})=>[(0,l._)("div",U,[V,(0,l.Wm)(Y,{id:"email",name:"email",type:"email",class:(0,s.C_)(["form-control",{"is-invalid":e["email"]}]),rules:"email|required",placeholder:"請輸入 Email",modelValue:P.user.email,"onUpdate:modelValue":t[2]||(t[2]=e=>P.user.email=e)},null,8,["class","modelValue"]),(0,l.Wm)(B,{name:"email",class:"invalid-feedback"})]),(0,l._)("div",H,[T,(0,l.Wm)(Y,{id:"name",name:"姓名",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:P.user.name,"onUpdate:modelValue":t[3]||(t[3]=e=>P.user.name=e)},null,8,["class","modelValue"]),(0,l.Wm)(B,{name:"姓名",class:"invalid-feedback"})]),(0,l._)("div",D,[O,(0,l.Wm)(Y,{id:"tel",name:"電話",type:"tel",class:(0,s.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:j.isPhone,modelValue:P.user.tel,"onUpdate:modelValue":t[4]||(t[4]=e=>P.user.tel=e)},null,8,["class","rules","modelValue"]),(0,l.Wm)(B,{name:"電話",class:"invalid-feedback"})]),(0,l._)("div",L,[F,(0,l.Wm)(Y,{id:"address",name:"地址",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:P.user.address,"onUpdate:modelValue":t[5]||(t[5]=e=>P.user.address=e)},null,8,["class","modelValue"]),(0,l.Wm)(B,{name:"地址",class:"invalid-feedback"})]),(0,l._)("div",S,[Z,(0,l.wy)((0,l._)("textarea",{id:"message",class:"form-control",cols:"30",rows:"5","onUpdate:modelValue":t[6]||(t[6]=e=>P.message=e),placeholder:"給我們一些建議或提醒吧"},null,512),[[o.nr,P.message]])]),z])),_:1},8,["onSubmit"])])])])])],64)}var P=a(3329),j=a(2262),I=(e,t)=>{const a=e.__vccOpts||e;for(const[l,s]of t)a[l]=s;return a};const M=(0,l.aZ)({props:{direction:{type:String,default:"normal"},duration:{type:Number,default:20},delay:{type:Number,default:0},loop:{type:Number,default:0},clone:{type:Boolean,default:!1},gradient:{type:Boolean,default:!1},gradientColor:{type:Array,default:[255,255,255]},gradientWidth:{type:String,default:"200px"},pauseOnHover:{type:Boolean,default:!1},pauseOnClick:{type:Boolean,default:!1}},setup(e){let t=(0,j.iH)(0),a=(0,j.iH)("100%"),s=(0,j.iH)(0),o=(0,j.iH)(0),n=(0,j.iH)(0),r=(0,j.iH)(!1),i=(0,j.iH)(null),c=(0,j.iH)(null);const d=()=>{s.value++},u=async()=>{setInterval((()=>{if(a.value="0%",null!==i.value&&null!==c.value){if(i.value&&c.value){if("clientWidth"in i.value&&"clientWidth"in c.value){n.value=i.value.clientWidth,o.value=c.value.clientWidth;const e=Math.ceil(o.value/n.value);return t.value=isFinite(e)?e:0,t.value}return a.value="100%",0}return a.value="100%",0}return a.value="100%",0}),100)};(0,l.YP)(n,(()=>{e.clone&&d()})),(0,l.YP)(o,(()=>{e.clone&&d()}));const p=(0,l.Fl)((()=>{let t={"--duration":`${e.duration}s`,"--delay":`${e.delay}s`,"--direction":`${e.direction}`,"--pauseOnHover":""+(e.pauseOnHover?"paused":"running"),"--pauseOnClick":""+(e.pauseOnClick?"paused":"running"),"--loops":`${0===e.loop?"infinite":e.loop}`,"--gradient-color":`rgba(${e.gradientColor[0]}, ${e.gradientColor[1]}, ${e.gradientColor[2]}, 1), rgba(${e.gradientColor[0]}, ${e.gradientColor[1]}, ${e.gradientColor[2]}, 0)`,"--gradient-width":`${e.gradientWidth}`,"--min-width":`${a.value}`};return t})),m=(0,l.Fl)((()=>!!e.gradient)),h=async()=>{e.clone?(await u(),d(),r.value=!0):r.value=!0};return(0,l.bv)((async()=>{h()})),{ready:r,contentWidth:n,containerWidth:o,minWidth:a,marqueeContent:i,marqueeContainer:c,componentKey:s,showGradient:m,cloneAmount:t,ForcesUpdate:d,checkForClone:u,setupMarquee:h,getCurrentStyle:p}}}),Y={key:0},B={class:"transparent-overlay",ref:"marqueeContainer"},K={key:0,class:"overlay"},A={class:"marquee",ref:"marqueeContent"},E={class:"marquee"};function G(e,t,a,o,n,r){return e.ready?((0,l.wg)(),(0,l.iD)("div",Y,[((0,l.wg)(),(0,l.iD)("div",{class:"vue3-marquee",style:(0,s.j5)(e.getCurrentStyle),key:e.componentKey},[(0,l._)("div",B,null,512),e.showGradient?((0,l.wg)(),(0,l.iD)("div",K)):(0,l.kq)("",!0),(0,l._)("div",A,[(0,l.WI)(e.$slots,"default")],512),(0,l._)("div",E,[(0,l.WI)(e.$slots,"default")]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.cloneAmount,(t=>((0,l.wg)(),(0,l.iD)("div",{class:"marquee cloned",key:t},[(0,l.WI)(e.$slots,"default")])))),128))],4))])):(0,l.kq)("",!0)}var J=I(M,[["render",G]]);var Q={components:{Vue3Marquee:J},data(){return{isLoading:!1,carts:[],finalTotal:0,total:0,couponCode:"",user:{},message:""}},inject:["mitt","currency"],watch:{total(){this.total-this.finalTotal!==0&&(this.couponCode="")}},methods:{getCarts(){this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/v2/api/skps0102/cart").then((e=>{this.isLoading=!1;const{carts:t,total:a}=e.data.data;0===t.length?this.$router.push("/cart"):(this.carts=t,this.total=a,this.finalTotal=e.data.data.final_total)})).catch((e=>{const{message:t,success:a}=e.response.data;(0,P.Z)(a,t)}))},getDiscount(){this.isLoading=!0;const e={data:{code:this.couponCode}};this.$http.post("https://vue3-course-api.hexschool.io/v2/api/skps0102/coupon",e).then((e=>{this.isLoading=!1;const{message:t,success:a}=e.data;(0,P.Z)(a,t),this.finalTotal=e.data.data.final_total,this.couponCode=""})).catch((e=>{const{message:t,success:a}=e.response.data;(0,P.Z)(a,t),this.couponCode=""}))},createOrder(){this.isLoading=!0;const e={data:{user:this.user,message:this.message}};this.$http.post("https://vue3-course-api.hexschool.io/v2/api/skps0102/order",e).then((e=>{this.isLoading=!1,this.mitt.emit("getCartLength"),this.$refs.form.resetForm();const{orderId:t}=e.data;this.$router.push(`/checkout/pay/${t}`)})).catch((e=>{const{message:t,success:a}=e.response.data;(0,P.Z)(a,t)}))},isPhone(e){const t=/^(09)[0-9]{8}$/;return!!t.test(e)||"請輸入正確的電話號碼"}},mounted(){this.getCarts()}},R=a(3744);const X=(0,R.Z)(Q,[["render",N]]);var ee=X}}]);
//# sourceMappingURL=493.2012c912.js.map